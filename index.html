<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One Scoop</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lobster&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet"/>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
    <header class="header">
        <nav id="navbar">
            <div class="nav_header">
                <div class="nav_logo">
                    <a href="#">
                        <img src="images/logo.png" alt="Logo" class="nav_logo1">
                    </a>
                </div>
                <div id="menu-btn" class="nav_menu_btn">
                    <i class="ri-menu-line"></i>
                </div>
            </div>
            <ul class="nav_links" id="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#history">Sejarah</a></li>
                <li><a href="#variant">Variant</a></li>
                <li><a href="#facts">Facts</a></li>
                <li><a href="#contact">About</a></li>
            </ul>
            <div class="nav_logo_right">
                <a href="#">
                    <img src="images/logo.png" alt="Logo" class="nav_logo_right_img">
                </a>
            </div>
        </nav>
        <div class="nav-clue" id="nav-clue">
            <img src="images/logo.png" alt="Nav Clue" class="nav-clue-img">
        </div>
        <div class="section_container header_container" id="home">
            <div class="header_image">
                <img src="images/awal2.png" alt="header"/>
            </div>
            <div class="header_content">
                <h2>IT'S GOOD TIME FOR ICE CREAM</h2>
                <h1>ONE SCOOP<br> <span>ICE CREAM</span></h1>
            </div>
        </div>
    </header>

    <section class="section_container" id="history">
        <h2 class="section_header">Sejarah Es Krim</h2>
        <p class="section_description">
            Es krim pertama kali muncul di Tiongkok sekitar 200 SM, terbuat dari susu dan es. Marco Polo membawa resep ini ke Eropa, dan kini es krim jadi simbol keceriaan di seluruh dunia! Dari cone hingga sundae, es krim terus bikin kita tersenyum.
        </p>
    </section>

    <section class="section_container banner_container" id="special">
        <div class="banner_card">
            <div class="banner_overlay"></div>
            <p>TRY IT NOW!</p>
            <h4>MOST POPULAR ICE CREAM</h4>
        </div>
        <div class="banner_card">
            <div class="banner_overlay"></div>
            <p>TRY IT NOW!</p>
            <h4>MORE FUN <br> MORE TASTE</h4>
        </div>
        <div class="banner_card">
            <div class="banner_overlay"></div>
            <p>TRY IT NOW!</p>
            <h4>SO FRESH</h4>
        </div>
    </section>

    <section class="section_container order_container" id="variant">
        <h3>ALWAYS ON YOUR MOOD</h3>
        <h2 class="section_header">CHOOSE & ENJOY</h2>
        <p class="section_description">
            Pilih es krim favoritmu dan rasakan kelezatan yang bikin hari lebih ceria! Dari mochi yang kenyal hingga stroberi yang segar, kami punya semua untukmu.
        </p>
        <div class="order_carousel">
            <button class="carousel_btn prev_btn" onclick="scrollCarousel('prev')"><i class="ri-arrow-left-s-line"></i></button>
            <div class="order_grid">
                <div class="order_card" onclick="openModal('mochi')">
                    <img src="images/icecream-mochi.jpg" alt="Mochi Ice Cream">
                    <div class="overlay">Mochi Ice Cream</div>
                    <h4>New Variant!<br> <span>Mochi Ice Cream</span></h4>
                    <p>Kenyal di luar, lembut di dalam, penuh kejutan!</p>
                    <button class="btn">More!</button>
                </div>
                <div class="order_card" onclick="openModal('chocolate')">
                    <img src="images/icecream-choco.png" alt="Choco Ice Cream">
                    <div class="overlay">Choco Ice Cream</div>
                    <h4>Choco Ice Cream</h4>
                    <p>Kaya rasa cokelat, bikin hati meleleh!</p>
                    <button class="btn">More!</button>
                </div>
                <div class="order_card" onclick="openModal('strawberry')">
                    <img src="images/icecream-strawberry.png" alt="Strawberry Ice Cream">
                    <div class="overlay">Strawberry Ice Cream</div>
                    <h4>Strawberry Ice Cream</h4>
                    <p>Segar dan manis, seperti musim panas!</p>
                    <button class="btn">More!</button>
                </div>
                <div class="order_card" onclick="openModal('three')">
                    <img src="images/icecream-three.png" alt="Horn Three Tastes Ice Cream">
                    <div class="overlay">Horn Three Tastes Ice Cream</div>
                    <h4>Horn Three Tastes Ice Cream</h4>
                    <p>Percampuran tiga rasa yang manis!</p>
                    <button class="btn">More!</button>
                </div>
                <div class="order_card" onclick="openModal('vanilla')">
                    <img src="images/icecream-vanilla.png" alt="Vanilla Dream">
                    <div class="overlay">Vanilla Dream</div>
                    <h4>Vanilla Dream</h4>
                    <p>Klasik yang tak pernah mengecewakan!</p>
                    <button class="btn">More!</button>
                </div>
                <div class="order_card" onclick="openModal('matcha')">
                    <img src="images/icecream-matcha.png" alt="Matcha Green">
                    <div class="overlay">Matcha Green</div>
                    <h4>Matcha Green</h4>
                    <p>Segar dengan sentuhan teh hijau premium!</p>
                    <button class="btn">More!</button>
                </div>
                <div class="order_card" onclick="openModal('rainbow')">
                    <img src="images/icecream-rainbow.png" alt="Rainbow Swirl">
                    <div class="overlay">Rainbow Swirl</div>
                    <h4>Rainbow Swirl</h4>
                    <p>Warna-warni yang bikin semangat!</p>
                    <button class="btn">More!</button>
                </div>
                <div class="order_card" onclick="openModal('cookies')">
                    <img src="images/icecream-cookies.png" alt="Cookies & Cream">
                    <div class="overlay">Cookies & Cream</div>
                    <h4>Cookies & Cream</h4>
                    <p>Perpaduan sempurna es krim dan cookies!</p>
                    <button class="btn">More!</button>
                </div>
            </div>
            <button class="carousel_btn next_btn" onclick="scrollCarousel('next')"><i class="ri-arrow-right-s-line"></i></button>
        </div>
    </section>

    <section class="section_container facts_container" id="facts">
        <h3 class="facts_subheader">FAKTA SERU</h3>
        <h2 class="section_header facts_header">TAHUKAH KAMU?</h2>
        <p class="section_description facts_description">Es krim bisa bikin harimu lebih ceria dalam sekejap!</p>
        <button class="btn facts_btn" onclick="showRandomFact()">Fakta Lain</button>
        <p id="fact-text" class="fact_text"></p>
    </section>

    <section class="section_container order-form-container" id="order">
        <h2 class="section_header">PESAN SEKARANG</h2>
        <p class="section_description">
            Isi form berikut untuk memesan es krim favoritmu. Kami akan menghubungi Anda untuk konfirmasi pesanan.
        </p>
        <form id="orderForm" class="order-form">
            <div class="form-group">
                <label for="name">Nama Lengkap</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="variant">Varian Es Krim</label>
                <select id="variant" name="variant" required>
                    <option value="">Pilih Varian</option>
                    <option value="Mochi Ice Cream">Mochi Ice Cream</option>
                    <option value="Choco Ice Cream">Choco Ice Cream</option>
                    <option value="Strawberry Ice Cream">Strawberry Ice Cream</option>
                    <option value="Horn Three Tastes">Horn Three Tastes</option>
                    <option value="Vanilla Dream">Vanilla Dream</option>
                    <option value="Matcha Green">Matcha Green</option>
                    <option value="Rainbow Swirl">Rainbow Swirl</option>
                    <option value="Cookies & Cream">Cookies & Cream</option>
                </select>
            </div>
            <div class="form-group">
                <label for="quantity">Jumlah</label>
                <input type="number" id="quantity" name="quantity" min="1" value="1" required>
            </div>
            <div class="form-group">
                <label for="deliveryDate">Tanggal Pengiriman</label>
                <input type="date" id="deliveryDate" name="deliveryDate" required>
            </div>
            <div class="form-group">
                <label for="notes">Catatan Tambahan</label>
                <textarea id="notes" name="notes" rows="3"></textarea>
            </div>
            <button type="submit" class="btn submit-btn">Pesan Sekarang</button>
        </form>
    </section>

    <section class="about" id="contact">
        <div class="section_container about_container">
            <h3 class="about_subheader">TENTANG KAMI</h3>
            <h2 class="section_header about_header">ONE SCOOP ICE CREAM</h2>
            <p class="section_description about_description">
                One Scoop Ice Cream hadir untuk membawa kebahagiaan dalam setiap suapan! Kami adalah tim yang penuh semangat dalam menciptakan es krim dengan bahan-bahan segar dan berkualitas tinggi. 
                Dari resep tradisional hingga inovasi modern seperti mochi ice cream, kami ingin membuat hari Anda lebih ceria dengan rasa yang tak terlupakan. 
                Bergabunglah dengan kami dalam petualangan rasa ini dan nikmati kelezatan es krim yang bikin hati senang!
            </p>
        </div>
        <img src="images/awal.png" alt="about" class="about_bg-1">
        <img src="images/awal.png" alt="about" class="about_bg-2">
        <img src="images/awal.png" alt="about" class="about_bg-3">
    </section>

    <footer class="footer">
        <div class="section_container footer_container">
            <div class="footer_logo">
                <img src="images/logo.png" alt="Logo">
            </div>
            <div class="footer_content">
                <p>One Scoop Ice Cream - Membawa kebahagiaan dalam setiap suapan sejak 2020. Es krim kami dibuat dengan bahan-bahan terbaik dan penuh cinta.</p>
            </div>
            <div>
                <ul class="footer_links">
                    <li>
                        <span><i class="ri-map-pin-2-fill"></i></span>
                        Bandung, Indonesia, 40890
                    </li>
                    <li>
                        <span><i class="ri-mail-fill"></i></span>
                        info@onescoop.com
                    </li>
                </ul>
                <div class="footer_socials">
                    <a href="#"><i class="ri-facebook-circle-fill"></i></a>
                    <a href="#"><i class="ri-instagram-fill"></i></a>
                    <a href="#"><i class="ri-twitter-fill"></i></a>
                    <a href="#"><i class="ri-whatsapp-fill"></i></a>
                </div>
            </div>
        </div>
        <div class="footer_bar">
            Copyright © 2025 One Scoop Ice Cream. All rights reserved.
        </div>
    </footer>

    <div id="menu-modal" class="menu-modal">
        <div class="menu-modal-content">
            <span class="menu-close" onclick="closeMenuModal()">×</span>
            <ul class="nav_links" id="nav-links-modal">
                <li><a href="#home" onclick="closeMenuModal()">Home</a></li>
                <li><a href="#history" onclick="closeMenuModal()">Sejarah</a></li>
                <li><a href="#variant" onclick="closeMenuModal()">Variant</a></li>
                <li><a href="#facts" onclick="closeMenuModal()">Fakta Seru</a></li>
                <li><a href="#order" onclick="closeMenuModal()">Pesan</a></li>
                <li><a href="#contact" onclick="closeMenuModal()">About Us</a></li>
            </ul>
        </div>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">×</span>
            <h2 id="modal-title"></h2>
            <p id="modal-description"></p>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Log visitor data to Google Sheets
        function logVisitor() {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbx7KvyRtAdUTHu4VQ_K_yNn-Q0olboT74S_UaamEx8kW65U28nz_ZyLcEUVA1Wn_Znv/exec';
            const timestamp = new Date().toISOString();

            // Ambil IP Address menggunakan API ipify.org
            fetch('https://api.ipify.org?format=json', { method: 'GET' })
                .then(response => response.json())
                .then(data => {
                    const ipAddress = data.ip || 'Unknown';

                    // Kirim data ke Google Apps Script
                    return fetch(scriptURL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            action: 'logVisitor',
                            ipAddress: ipAddress,
                            timestamp: timestamp
                        })
                    });
                })
                .catch(error => {
                    console.error('Error fetching IP:', error);
                    // Jika gagal mendapatkan IP, tetap kirim data dengan IP 'Unknown (Fetch Failed)'
                    return fetch(scriptURL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            action: 'logVisitor',
                            ipAddress: 'Unknown (Fetch Failed)',
                            timestamp: timestamp
                        })
                    });
                })
                .then(() => {
                    console.log('Log visitor berhasil');
                })
                .catch(error => {
                    console.error('Error logging visitor:', error);
                    Swal.fire({
                        title: 'Error',
                        text: 'Gagal mencatat data pengunjung. Silakan coba lagi nanti.',
                        icon: 'error',
                        confirmButtonText: 'OK'
                    });
                });
        }

        // Handle form submission
        document.getElementById('orderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const scriptURL = 'https://script.google.com/macros/s/AKfycbx7KvyRtAdUTHu4VQ_K_yNn-Q0olboT74S_UaamEx8kW65U28nz_ZyLcEUVA1Wn_Znv/exec';
            const formData = new FormData(this);
            const data = {
                action: 'submitOrder',
                name: formData.get('name'),
                email: formData.get('email'),
                variant: formData.get('variant'),
                quantity: formData.get('quantity'),
                deliveryDate: formData.get('deliveryDate'),
                notes: formData.get('notes'),
                timestamp: new Date().toISOString()
            };
            
            Swal.fire({
                title: 'Mengirim...',
                text: 'Harap tunggu sebentar.',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });

            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }).then(() => {
                Swal.fire({
                    title: 'Pesanan Berhasil!',
                    text: 'Terima kasih telah memesan es krim kami. Kami akan segera menghubungi Anda.',
                    icon: 'success',
                    confirmButtonText: 'OK'
                });
                this.reset();
            }).catch(error => {
                Swal.fire({
                    title: 'Error',
                    text: 'Terjadi kesalahan saat mengirim pesanan. Silakan coba lagi.',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
                console.error('Error:', error);
            });
        });

        // Log visitor when page loads
        window.addEventListener('load', logVisitor);

        // Validasi tanggal pengiriman
        document.getElementById('deliveryDate').setAttribute('min', new Date().toISOString().split('T')[0]);
    </script>
</body>
</html>